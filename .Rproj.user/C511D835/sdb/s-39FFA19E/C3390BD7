{
    "collab_server" : "",
    "contents" : "# feeding_cycle_models_main_script.r\n#\n# Assembles the different routines for plotting field quantities against coverage of vector control interventions\n# based on the Chitnis (2008) models\n# Matlab code updated 24 May 2007 Nakul Chitnis\n# Converted into R by Olivier Briet on 15 November 2013\n# This script assembled by Tom Smith and Peter Pemberton-Ross December 2016\n# The results are in list 'impacts'; plots are in subfolder 'figures'\n# To use the full functionality including forward simulations adapt script JBD2008CohortSim.r\n\n# Assign correct working directory for your computer\nsetwd('~/Documents/GitRepos/anophelesmodel2/dev_AnophelesModel/base/')\n\n\n######################################################################\n## User-defined Parameter Values\n######################################################################\n\n#required_species<- 'albimanus'\n\n#required_species<- 'Albimanus_DameMarie'\n\n#required_species<- 'Albimanus_Laborde'\n\n\nrequired_species<- 'Gambiaess'\n\n\nuse_csv_datafile <- FALSE\n\n# Edit vector_specific_parameters.r to include parameters for the chosen vector\nspecies_folder<- required_species\n\n# Edit lists of interventions to include those required.  Must include 'No Intervention'\nvectorInterventions <- c('No Intervention', 'LLINs','Permethrin IRS', 'DDT IRS', 'Bendiocarb IRS','Actellic 300 CS','Actellic 50 EC','Icon 10 CS', 'House Screening', 'House Screening but outside until bedtime', 'LLINs lambdacyhalothrin albimanus', 'LLINs lambdacyhalothrin albimanus inside house before biting starts', 'DDT IRS albimanus', 'DDT IRS albimanus but outside until bedtime', 'Bendiocarb IRS albimanus', 'Bendiocarb IRS albimanus but outside until bedtime', 'Deltamethrin IRS albimanus', 'Deltamethrin IRS albimanus but outside until bedtime', 'LLINs lambdacyhalothrin gambiae inside house before biting starts', 'LLINs lambdacyhalothrin gambiae', 'DDT IRS gambiae but outside until bedtime', 'DDT IRS gambiae', 'Bendiocarb IRS gambiae but outside until bedtime', 'Bendiocarb IRS gambiae', 'Lambdacyhalothrin IRS gambiae but outside until bedtime', 'Lambdacyhalothrin IRS gambiae')\n\n#vectorInterventions <- c('No Intervention', 'House Screening', 'House Screening but outside until bedtime', 'LLINs lambdacyhalothrin albimanus', 'DDT IRS albimanus', 'DDT IRS albimanus but outside until bedtime', 'Bendiocarb IRS albimanus', 'Bendiocarb IRS albimanus but outside until bedtime', 'Deltamethrin IRS albimanus', 'Deltamethrin IRS albimanus but outside until bedtime')\n\n#outside until bedtime\n#vectorInterventions <- c('No Intervention', 'House Screening but outside until bedtime', 'DDT IRS albimanus but outside until bedtime', 'Bendiocarb IRS albimanus but outside until bedtime', 'Deltamethrin IRS albimanus but outside until bedtime', 'LLINs lambdacyhalothrin albimanus')\n\n#vectorInterventions <- c('No Intervention', 'House Screening but outside until bedtime', 'DDT IRS albimanus but outside until bedtime', 'Bendiocarb IRS albimanus but outside until bedtime', 'LLINs lambdacyhalothrin albimanus', 'DDT IRS gambiae but outside until bedtime','Bendiocarb IRS gambiae but outside until bedtime', 'LLINs lambdacyhalothrin gambiae')\n\n\n#inside as soon as biting starts\n#vectorInterventions <- c('No Intervention', 'House Screening', 'DDT IRS albimanus', 'Bendiocarb IRS albimanus', 'Deltamethrin IRS albimanus', 'LLINs lambdacyhalothrin albimanus inside house before biting starts')\n\n#vectorInterventions <- c('No Intervention', 'House Screening', 'DDT IRS albimanus', 'Bendiocarb IRS albimanus', 'LLINs lambdacyhalothrin albimanus inside house before biting starts', 'DDT IRS gambiae', 'Bendiocarb IRS gambiae', 'LLINs lambdacyhalothrin gambiae inside house before biting starts')\n\n\n#interventions <- c(vectorInterventions,'Larviciding','Case Management','RTS,S mass vaccination','Test and Treat')\nvectorInterventions = c('DDT IRS')\n#interventions <- c(vectorInterventions,'Larviciding')\n\n\n# vector of numbers of humans to be considered (animal)\n#\nnumhum <- c(5, 10, 15, 20, 30, 40, 60, 100, 200, 500, 1000, 1200, 1500, 1600, 1700, 1800, 1900, 1950, 1980, 1990, 1999, 2000)\n\n# Coverage levels to analyse\ncoverage <- c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.95, 0.98, 0.99)\n\ncoverage <- c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, seq(from=0.62, to=0.98, by=0.02), 0.99)\n\n\n# select here the indices of the  values of the coverage to be plotted\n\nrequired_coverages <- c(3,5,7)\n\n\nsource('fieldData.r')\nsource('printParameterXML.r')\nsource('fevalentquantNOEIGEN.r')\nsource('averageEffect_Decay.r')\nsource('parameterMapping2.r')\nsource('calpsts.r')\nsource('gambiae_parameters.r')\nsource('availability.r')\nsource('calculate_Pii.r')\nsource('intervention_parameters.r')\nsource('Impact_human_interventions.r')\nsource('multiple_feval_impact.r')\nsource('Plots_of_Impact_vs_HBI_and_Coverage.r')\n\n# source('intervention_parameters_interpolationpoints.r')\nnum.interpolation.points <- 100\nnum.interpolation.points <- 10\n\n\n######################################################################\n# Fixed Parameter Values\n\n# Number of types of hosts: intervened, non-intervened, animals\nn <- c(3);\n\n# Number of types of hosts that are malaria susceptible\nm <- c(2);\n\n# Number of mosquitoes born and entering the host-seeking state per day\nNv0  <-  c(10000000)\n\n# Population size for the simulation (must be > maximum of numhum)\nmaxpop <- 2000\n\n######################################################################\ndefault_params <- gambiae_parameters()\nif (!use_csv_datafile){\n  source(paste0(species_folder,'/vector_specific_parameters.r'))\n  vector_specific_params <- availability(vector_specific_parameters(default_params),c(0,maxpop-1000,1000))\n} else {\n  allSpecies<-fieldData()\n  speciesNo <-lookupSpeciesNo(required_species,allSpecies$speciesList,allSpecies)\n  required_params<- allSpecies[speciesNo][[1]]\n  temp<-get_required_vector_parameters(default_params,required_params)\n  vector_specific_params <- availability(temp,c(0,maxpop-1000, 1000))\n}\nvector_specific_params<- getComparison_withDefault(default_params,vector_specific_params)\n# #input_params <- intervention_parameters(vector_specific_params,vectorInterventions)\n# #impacts <- multiple_feval_impact(maxpop,coverage,numhum,input_params,vectorInterventions)\n#\n\n# with averaging\ninput_params <- intervention_parameters(vector_specific_params,vectorInterventions)\nimpacts <- multiple_feval_impact(maxpop,coverage,numhum,input_params,vectorInterventions)\n\nimpacts.list<-vector(\"list\", length=num.interpolation.points)\nfor(p in 1:num.interpolation.points){\n\tinput_params <- intervention_parameters_interpolationpoints(vector_specific_params,vectorInterventions, num.interpolation.points=num.interpolation.points, interpolationpoint=p)\n\timpacts.list[[p]] <- multiple_feval_impact(maxpop=maxpop, coverage=coverage, numhum=numhum, input_params=input_params, desiredInterventions=vectorInterventions)\n}\n\nparameter.list <- c('zeta.3', 'alphai', 'muvA', 'td', 'PBi', 'PCi', 'PDi', 'PEi', 'tau', 'ts', 'to', 'Kvi', 'Vectorial Capacity', 'impacts', 'survival')\n\nimpacts.sum<-impacts.list[[1]]\nfor(intervention in vectorInterventions){\n\tfor(parameter in parameter.list){\n\t\tfor(p in 2:num.interpolation.points){\n\t\t\timpacts.sum[[intervention]][[parameter]]<-impacts.sum[[intervention]][[parameter]]+impacts.list[[p]][[intervention]][[parameter]]\n\t\t}\n\t}\n}\n\n#The average\nimpacts<-impacts.list[[1]]\nfor(intervention in vectorInterventions){\n\tfor(parameter in parameter.list){\n\t\timpacts[[intervention]][[parameter]]<-impacts.sum[[intervention]][[parameter]]/num.interpolation.points\n\t}\n}\n\n#recalculating the impacts based on the average VC\nfor(intervention in vectorInterventions){\n\timpacts[[intervention]][['impacts2']] <- 100 - 100*impacts[[intervention]][['Vectorial Capacity']]/impacts[[intervention]][['Vectorial Capacity']][,1]\n}\n#\n#\n# #Add in impacts on Rc of human side interventions and larviciding\n#\n# if ('Case Management' %in% interventions){\n#   impacts[['Case Management']][['impacts']] <- Impact_treatment_coverage(coverage)\n# }\n# if ('RTS,S mass vaccination' %in% interventions){\n#   impacts[['RTS,S mass vaccination']][['impacts']] <- 37.0*coverage\n# }\n# if ('Test and Treat' %in% interventions){\n#   impacts[['Test and Treat']][['impacts']] <- Impact_test_treat(coverage)\n# }\n# if ('Larviciding' %in% interventions){\n#   impacts[['Larviciding']][['impacts']] <- coverage*100.0\n# }\n#\n# #completed<-Plots_of_Impact_vs_HBI_and_Coverage(coverage,required_coverages,numhum,impacts,interventions)\n#\n# # To create XML an additional library is required. This worked but now says there is no XML package\n# # printParameterXML(vector_specific_params,paste0('../',species_folder,'/',required_species,'.xml'))\n#\n#\n#\n#\n#\n#\n",
    "created" : 1634629284703.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1396933439",
    "id" : "C3390BD7",
    "lastKnownWriteTime" : 1630957471,
    "last_content_update" : 1630957471,
    "path" : "~/Documents/GitRepos/anophelesmodel2/dev_AnophelesModel/base/script_main_SIS_impact.r",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 9,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}